<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <title type="text">
        Lucas DiCioccio's blog
    </title>
    <id>
        https://dicioccio.fr/atom.xml
    </id>
    <updated>
        2022-12-10T01:00:00Z
    </updated>
    <entry>
        <id>
            https://dicioccio.fr/halogen-echarts-example.html
        </id>
        <title type="text">
            Halogen ECharts Simple
        </title>
        <updated>
            2022-12-10T01:00:00Z
        </updated>
        <author>
            <name>
                Lucas DiCioccio
            </name>
        </author>
        <content type="html">
            &lt;div class="main-article"&gt;&lt;section class="main-section"&gt;&lt;div id="example-err"&gt; &lt;/div&gt; &lt;p&gt;This page is a demonstration of a &lt;a href="https://github.com/lucasdicioccio/purescript-halogen-echarts-simple"&gt;ECharts-for-Halogen&lt;/a&gt; library I published. The library spawned out of this very-blog (or rather, from &lt;a href="kitchensink-tech.github.io/"&gt;Kitchen-Sink&lt;/a&gt;) to display the page graph on the home page.&lt;/p&gt; &lt;h2 id="installation"&gt;Installation&lt;/h2&gt; &lt;p&gt;Assuming you use &lt;code&gt;npm&lt;/code&gt; and &lt;code&gt;spago&lt;/code&gt;.&lt;/p&gt; &lt;pre&gt;&lt;code class="language-console"&gt;npm i echarts spago install halogen-echarts-simple &lt;/code&gt;&lt;/pre&gt; &lt;h2 id="usage"&gt;Usage&lt;/h2&gt; &lt;p&gt;The &lt;code&gt;simple&lt;/code&gt; in the title means that we provide a very simple layer. That is, you have to fill in the blanks.&lt;/p&gt; &lt;p&gt;What this library offers is a function to return Halogen components provided that you teach it:&lt;/p&gt; &lt;ul&gt; &lt;li&gt;(a) what is the type of the &lt;code&gt;options&lt;/code&gt; object passed to EChart &lt;/li&gt; &lt;li&gt;(b) what sort of click-callback objects you care to capture &lt;/li&gt; &lt;/ul&gt; &lt;p&gt;The &lt;code&gt;type Options o = {|o}&lt;/code&gt; definition embodies the &lt;code&gt;(a)&lt;/code&gt; above. The &lt;code&gt;type Output i = {|i}&lt;/code&gt; definition embodies the &lt;code&gt;(b)&lt;/code&gt; above.&lt;/p&gt; &lt;p&gt;You thus need some boilerplate work to type and translate the various ECharts datatypes (with its flurry of possible branches). That is, rather than trying to build a all-you-can-eat-buffet type that would match every ‘options’, we prefer to restrict ourselves to &lt;em&gt;simple&lt;/em&gt; situations where a given graph has exactly one type. Besides the boilerplate, there probably are limitations (I have not tried the most advanced charts options involving JavaScript functions yet). For situations where the ECharts options merely are uniform data, the boilerplate work should be pretty straightforward.&lt;/p&gt; &lt;h2 id="example-simple-line-chart"&gt;example: simple line chart&lt;/h2&gt; &lt;p&gt;Here we start translating &lt;a href="https://echarts.apache.org/examples/en/editor.html?c=line-simple"&gt;the line-simple example&lt;/a&gt;.&lt;/p&gt; &lt;h3 id="purescript-definitions"&gt;Purescript definitions&lt;/h3&gt; &lt;p&gt;We need two things to make the example work: a Slot for your Halogen component, and a type to teach PureScript what is the shape of the &lt;code&gt;options&lt;/code&gt; object for ECharts.&lt;/p&gt; &lt;div class="code code--highlighted"&gt;&lt;div class="sourceCode"&gt;&lt;pre class="sourceCode"&gt;&lt;code class="sourceCode"&gt;&lt;span id="1"&gt;&lt;a href="#1" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt;&lt;span class="kw"&gt;type&lt;/span&gt; &lt;span class="dt"&gt;Slots&lt;/span&gt; &lt;span class="ot"&gt;=&lt;/span&gt;&lt;/span&gt; &lt;span id="2"&gt;&lt;a href="#2" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; (&lt;span class="ot"&gt; echarts ::&lt;/span&gt; &lt;span class="kw"&gt;forall&lt;/span&gt; query output&lt;span class="op"&gt;.&lt;/span&gt; &lt;span class="dt"&gt;H.Slot&lt;/span&gt; query output &lt;span class="dt"&gt;Unit&lt;/span&gt; &lt;/span&gt; &lt;span id="3"&gt;&lt;a href="#3" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; )&lt;/span&gt; &lt;span id="4"&gt;&lt;a href="#4" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt;_echarts &lt;span class="ot"&gt;=&lt;/span&gt; &lt;span class="dt"&gt;Proxy&lt;/span&gt;&lt;span class="ot"&gt; ::&lt;/span&gt; &lt;span class="dt"&gt;Proxy&lt;/span&gt; &lt;span class="st"&gt;&amp;quot;echarts&amp;quot;&lt;/span&gt;&lt;/span&gt; &lt;span id="5"&gt;&lt;a href="#5" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt;&lt;/span&gt; &lt;span id="6"&gt;&lt;a href="#6" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt;&lt;span class="kw"&gt;type&lt;/span&gt; &lt;span class="dt"&gt;SimpleExampleOptions&lt;/span&gt; &lt;span class="ot"&gt;=&lt;/span&gt;&lt;/span&gt; &lt;span id="7"&gt;&lt;a href="#7" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; {&lt;span class="ot"&gt; xAxis ::&lt;/span&gt; {&lt;span class="ot"&gt; type ::&lt;/span&gt; &lt;span class="dt"&gt;String&lt;/span&gt;,&lt;span class="ot"&gt; data ::&lt;/span&gt; &lt;span class="dt"&gt;Array&lt;/span&gt; &lt;span class="dt"&gt;String&lt;/span&gt; }&lt;/span&gt; &lt;span id="8"&gt;&lt;a href="#8" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; ,&lt;span class="ot"&gt; yAxis ::&lt;/span&gt; {&lt;span class="ot"&gt; type ::&lt;/span&gt; &lt;span class="dt"&gt;String&lt;/span&gt; }&lt;/span&gt; &lt;span id="9"&gt;&lt;a href="#9" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; ,&lt;span class="ot"&gt; series ::&lt;/span&gt; &lt;span class="dt"&gt;Array&lt;/span&gt; {&lt;span class="ot"&gt; data ::&lt;/span&gt; &lt;span class="dt"&gt;Array&lt;/span&gt; &lt;span class="dt"&gt;Int&lt;/span&gt;,&lt;span class="ot"&gt; type ::&lt;/span&gt; &lt;span class="dt"&gt;String&lt;/span&gt; }&lt;/span&gt; &lt;span id="10"&gt;&lt;a href="#10" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; }&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;h3 id="single-line"&gt;single line&lt;/h3&gt; &lt;p&gt;Then we can call &lt;code&gt;ECharts.component&lt;/code&gt; to turn options into an Halogen Component, which you include in a Slot thanks to the &lt;code&gt;HH.slot_&lt;/code&gt; function.&lt;/p&gt; &lt;p&gt;Thus, the rendering function for your enclosing component needs to call &lt;code&gt;ECharts.components&lt;/code&gt;.&lt;/p&gt; &lt;pre&gt;&lt;code&gt; render0 = let obj :: SimpleExampleOptions obj = { xAxis: {type: &amp;quot;category&amp;quot;, data: [&amp;quot;Mon&amp;quot;, &amp;quot;Tue&amp;quot;, &amp;quot;Wed&amp;quot;, &amp;quot;Thu&amp;quot;, &amp;quot;Fri&amp;quot;, &amp;quot;Sat&amp;quot;, &amp;quot;Sun&amp;quot;]} , yAxis: {type: &amp;quot;value&amp;quot;} , series: [{type: &amp;quot;line&amp;quot;, data: [150, 230, 224, 218, 135, 147, 260]}] } in HH.div_ [ HH.text &amp;quot;echarts simple-line example&amp;quot; , HH.slot_ _echarts unit ECharts.component {options: obj, modified:false} ] &lt;/code&gt;&lt;/pre&gt; &lt;div id="example-0"&gt; &lt;/div&gt; &lt;script src="/js/halogen-echarts-example.js" data-humdrum-arg="0"&gt;&lt;/script&gt; &lt;h3 id="two-lines"&gt;two lines&lt;/h3&gt; &lt;div class="code code--highlighted"&gt;&lt;div class="sourceCode"&gt;&lt;pre class="sourceCode"&gt;&lt;code class="sourceCode"&gt;&lt;span id="1"&gt;&lt;a href="#1" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; render1 &lt;span class="ot"&gt;=&lt;/span&gt;&lt;/span&gt; &lt;span id="2"&gt;&lt;a href="#2" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; &lt;span class="kw"&gt;let&lt;/span&gt;&lt;/span&gt; &lt;span id="3"&gt;&lt;a href="#3" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt;&lt;span class="ot"&gt; obj ::&lt;/span&gt; &lt;span class="dt"&gt;SimpleExampleOptions&lt;/span&gt;&lt;/span&gt; &lt;span id="4"&gt;&lt;a href="#4" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; obj &lt;span class="ot"&gt;=&lt;/span&gt;&lt;/span&gt; &lt;span id="5"&gt;&lt;a href="#5" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; { xAxis&lt;span class="op"&gt;:&lt;/span&gt; {&lt;span class="kw"&gt;type&lt;/span&gt;&lt;span class="op"&gt;:&lt;/span&gt; &lt;span class="st"&gt;&amp;quot;category&amp;quot;&lt;/span&gt;, &lt;span class="kw"&gt;data&lt;/span&gt;&lt;span class="op"&gt;:&lt;/span&gt; [&lt;span class="st"&gt;&amp;quot;Mon&amp;quot;&lt;/span&gt;, &lt;span class="st"&gt;&amp;quot;Tue&amp;quot;&lt;/span&gt;, &lt;span class="st"&gt;&amp;quot;Wed&amp;quot;&lt;/span&gt;, &lt;span class="st"&gt;&amp;quot;Thu&amp;quot;&lt;/span&gt;, &lt;span class="st"&gt;&amp;quot;Fri&amp;quot;&lt;/span&gt;, &lt;span class="st"&gt;&amp;quot;Sat&amp;quot;&lt;/span&gt;, &lt;span class="st"&gt;&amp;quot;Sun&amp;quot;&lt;/span&gt;]}&lt;/span&gt; &lt;span id="6"&gt;&lt;a href="#6" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; , yAxis&lt;span class="op"&gt;:&lt;/span&gt; {&lt;span class="kw"&gt;type&lt;/span&gt;&lt;span class="op"&gt;:&lt;/span&gt; &lt;span class="st"&gt;&amp;quot;value&amp;quot;&lt;/span&gt;}&lt;/span&gt; &lt;span id="7"&gt;&lt;a href="#7" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; , series&lt;span class="op"&gt;:&lt;/span&gt;&lt;/span&gt; &lt;span id="8"&gt;&lt;a href="#8" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; [{&lt;span class="kw"&gt;type&lt;/span&gt;&lt;span class="op"&gt;:&lt;/span&gt; &lt;span class="st"&gt;&amp;quot;line&amp;quot;&lt;/span&gt;, &lt;span class="kw"&gt;data&lt;/span&gt;&lt;span class="op"&gt;:&lt;/span&gt; [&lt;span class="dv"&gt;150&lt;/span&gt;, &lt;span class="dv"&gt;230&lt;/span&gt;, &lt;span class="dv"&gt;224&lt;/span&gt;, &lt;span class="dv"&gt;218&lt;/span&gt;, &lt;span class="dv"&gt;135&lt;/span&gt;, &lt;span class="dv"&gt;147&lt;/span&gt;, &lt;span class="dv"&gt;260&lt;/span&gt;]}&lt;/span&gt; &lt;span id="9"&gt;&lt;a href="#9" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; ,{&lt;span class="kw"&gt;type&lt;/span&gt;&lt;span class="op"&gt;:&lt;/span&gt; &lt;span class="st"&gt;&amp;quot;line&amp;quot;&lt;/span&gt;, &lt;span class="kw"&gt;data&lt;/span&gt;&lt;span class="op"&gt;:&lt;/span&gt; [&lt;span class="dv"&gt;250&lt;/span&gt;, &lt;span class="dv"&gt;130&lt;/span&gt;, &lt;span class="dv"&gt;254&lt;/span&gt;, &lt;span class="dv"&gt;318&lt;/span&gt;, &lt;span class="dv"&gt;137&lt;/span&gt;, &lt;span class="dv"&gt;247&lt;/span&gt;, &lt;span class="dv"&gt;160&lt;/span&gt;]}&lt;/span&gt; &lt;span id="10"&gt;&lt;a href="#10" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; ]&lt;/span&gt; &lt;span id="11"&gt;&lt;a href="#11" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; }&lt;/span&gt; &lt;span id="12"&gt;&lt;a href="#12" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; &lt;span class="kw"&gt;in&lt;/span&gt;&lt;/span&gt; &lt;span id="13"&gt;&lt;a href="#13" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; HH.div_&lt;/span&gt; &lt;span id="14"&gt;&lt;a href="#14" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; [ HH.text &lt;span class="st"&gt;&amp;quot;echarts simple-line example with two data-lines&amp;quot;&lt;/span&gt;&lt;/span&gt; &lt;span id="15"&gt;&lt;a href="#15" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; , HH.slot_ _echarts unit ECharts.component {options&lt;span class="op"&gt;:&lt;/span&gt; obj, modified&lt;span class="op"&gt;:&lt;/span&gt;false}&lt;/span&gt; &lt;span id="16"&gt;&lt;a href="#16" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; ]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div id="example-1"&gt; &lt;/div&gt; &lt;script src="/js/halogen-echarts-example.js" data-humdrum-arg="1"&gt;&lt;/script&gt; &lt;h3 id="interactive"&gt;interactive&lt;/h3&gt; &lt;p&gt;We need to define some action for our enclosing component. The component has an event for a numeric HTML input form.&lt;/p&gt; &lt;pre&gt;&lt;code&gt;data DemoAction = SetChart2Offset String &lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Now we can update the ECharts options at each re-render.&lt;/p&gt; &lt;div class="code code--highlighted"&gt;&lt;div class="sourceCode"&gt;&lt;pre class="sourceCode"&gt;&lt;code class="sourceCode"&gt;&lt;span id="1"&gt;&lt;a href="#1" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; render2 offset &lt;span class="ot"&gt;=&lt;/span&gt;&lt;/span&gt; &lt;span id="2"&gt;&lt;a href="#2" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; &lt;span class="kw"&gt;let&lt;/span&gt;&lt;/span&gt; &lt;span id="3"&gt;&lt;a href="#3" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; ys &lt;span class="ot"&gt;=&lt;/span&gt; [&lt;span class="dv"&gt;150&lt;/span&gt;, &lt;span class="dv"&gt;230&lt;/span&gt;, &lt;span class="dv"&gt;224&lt;/span&gt;, &lt;span class="dv"&gt;218&lt;/span&gt;, &lt;span class="dv"&gt;135&lt;/span&gt;, &lt;span class="dv"&gt;147&lt;/span&gt;, &lt;span class="dv"&gt;260&lt;/span&gt;]&lt;/span&gt; &lt;span id="4"&gt;&lt;a href="#4" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt;&lt;span class="ot"&gt; obj ::&lt;/span&gt; &lt;span class="dt"&gt;SimpleExampleOptions&lt;/span&gt;&lt;/span&gt; &lt;span id="5"&gt;&lt;a href="#5" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; obj &lt;span class="ot"&gt;=&lt;/span&gt;&lt;/span&gt; &lt;span id="6"&gt;&lt;a href="#6" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; { xAxis&lt;span class="op"&gt;:&lt;/span&gt; {&lt;span class="kw"&gt;type&lt;/span&gt;&lt;span class="op"&gt;:&lt;/span&gt; &lt;span class="st"&gt;&amp;quot;category&amp;quot;&lt;/span&gt;, &lt;span class="kw"&gt;data&lt;/span&gt;&lt;span class="op"&gt;:&lt;/span&gt; [&lt;span class="st"&gt;&amp;quot;Mon&amp;quot;&lt;/span&gt;, &lt;span class="st"&gt;&amp;quot;Tue&amp;quot;&lt;/span&gt;, &lt;span class="st"&gt;&amp;quot;Wed&amp;quot;&lt;/span&gt;, &lt;span class="st"&gt;&amp;quot;Thu&amp;quot;&lt;/span&gt;, &lt;span class="st"&gt;&amp;quot;Fri&amp;quot;&lt;/span&gt;, &lt;span class="st"&gt;&amp;quot;Sat&amp;quot;&lt;/span&gt;, &lt;span class="st"&gt;&amp;quot;Sun&amp;quot;&lt;/span&gt;]}&lt;/span&gt; &lt;span id="7"&gt;&lt;a href="#7" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; , yAxis&lt;span class="op"&gt;:&lt;/span&gt; {&lt;span class="kw"&gt;type&lt;/span&gt;&lt;span class="op"&gt;:&lt;/span&gt; &lt;span class="st"&gt;&amp;quot;value&amp;quot;&lt;/span&gt;}&lt;/span&gt; &lt;span id="8"&gt;&lt;a href="#8" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; , series&lt;span class="op"&gt;:&lt;/span&gt;&lt;/span&gt; &lt;span id="9"&gt;&lt;a href="#9" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; [{&lt;span class="kw"&gt;type&lt;/span&gt;&lt;span class="op"&gt;:&lt;/span&gt; &lt;span class="st"&gt;&amp;quot;line&amp;quot;&lt;/span&gt;, &lt;span class="kw"&gt;data&lt;/span&gt;&lt;span class="op"&gt;:&lt;/span&gt; ys }&lt;/span&gt; &lt;span id="10"&gt;&lt;a href="#10" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; ,{&lt;span class="kw"&gt;type&lt;/span&gt;&lt;span class="op"&gt;:&lt;/span&gt; &lt;span class="st"&gt;&amp;quot;line&amp;quot;&lt;/span&gt;, &lt;span class="kw"&gt;data&lt;/span&gt;&lt;span class="op"&gt;:&lt;/span&gt; &lt;span class="fu"&gt;map&lt;/span&gt; (\v &lt;span class="ot"&gt;-&amp;gt;&lt;/span&gt; v &lt;span class="op"&gt;+&lt;/span&gt; offset) ys}&lt;/span&gt; &lt;span id="11"&gt;&lt;a href="#11" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; ]&lt;/span&gt; &lt;span id="12"&gt;&lt;a href="#12" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; }&lt;/span&gt; &lt;span id="13"&gt;&lt;a href="#13" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; &lt;span class="kw"&gt;in&lt;/span&gt;&lt;/span&gt; &lt;span id="14"&gt;&lt;a href="#14" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; HH.div_&lt;/span&gt; &lt;span id="15"&gt;&lt;a href="#15" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; [ HH.p_ [ HH.text &lt;span class="st"&gt;&amp;quot;echarts simple-line example with an offset&amp;quot;&lt;/span&gt; ]&lt;/span&gt; &lt;span id="16"&gt;&lt;a href="#16" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; , HH.p_ [ HH.text &lt;span class="st"&gt;&amp;quot;we update the offset with the value in the input below:&amp;quot;&lt;/span&gt; ]&lt;/span&gt; &lt;span id="17"&gt;&lt;a href="#17" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; , HH.input&lt;/span&gt; &lt;span id="18"&gt;&lt;a href="#18" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; [ HP.type_ &lt;span class="dt"&gt;HP.InputNumber&lt;/span&gt;&lt;/span&gt; &lt;span id="19"&gt;&lt;a href="#19" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; , HP.value &lt;span class="op"&gt;$&lt;/span&gt; &lt;span class="fu"&gt;show&lt;/span&gt; offset&lt;/span&gt; &lt;span id="20"&gt;&lt;a href="#20" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; , HE.onValueInput &lt;span class="dt"&gt;SetChart2Offset&lt;/span&gt;&lt;/span&gt; &lt;span id="21"&gt;&lt;a href="#21" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; ]&lt;/span&gt; &lt;span id="22"&gt;&lt;a href="#22" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; , HH.slot_ _echarts unit ECharts.component {options&lt;span class="op"&gt;:&lt;/span&gt; obj, modified&lt;span class="op"&gt;:&lt;/span&gt;true}&lt;/span&gt; &lt;span id="23"&gt;&lt;a href="#23" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; ]&lt;/span&gt; &lt;span id="24"&gt;&lt;a href="#24" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt;&lt;/span&gt; &lt;span id="25"&gt;&lt;a href="#25" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; handleAction &lt;span class="ot"&gt;=&lt;/span&gt; &lt;span class="kw"&gt;case&lt;/span&gt; _ &lt;span class="kw"&gt;of&lt;/span&gt;&lt;/span&gt; &lt;span id="26"&gt;&lt;a href="#26" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; &lt;span class="dt"&gt;SetChart2Offset&lt;/span&gt; str &lt;span class="ot"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="kw"&gt;do&lt;/span&gt;&lt;/span&gt; &lt;span id="27"&gt;&lt;a href="#27" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; &lt;span class="kw"&gt;case&lt;/span&gt; &lt;span class="dt"&gt;Int&lt;/span&gt;&lt;span class="op"&gt;.&lt;/span&gt;fromString str &lt;span class="kw"&gt;of&lt;/span&gt;&lt;/span&gt; &lt;span id="28"&gt;&lt;a href="#28" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; &lt;span class="dt"&gt;Nothing&lt;/span&gt; &lt;span class="ot"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="fu"&gt;pure&lt;/span&gt; unit&lt;/span&gt; &lt;span id="29"&gt;&lt;a href="#29" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; &lt;span class="dt"&gt;Just&lt;/span&gt; n &lt;span class="ot"&gt;-&amp;gt;&lt;/span&gt; H.modify_ _ { chart2Offset &lt;span class="ot"&gt;=&lt;/span&gt; n }&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div id="example-2"&gt; &lt;/div&gt; &lt;script src="/js/halogen-echarts-example.js" data-humdrum-arg="2"&gt;&lt;/script&gt; &lt;h3 id="catching-clicks"&gt;catching clicks&lt;/h3&gt; &lt;p&gt;Say we want to add handlers to catch clicks on the chart. ECharts has &lt;a href="https://echarts.apache.org/handbook/en/concepts/event/#"&gt;some provisions for such events&lt;/a&gt; and with a bit of boilerplate we can recover the event data.&lt;/p&gt; &lt;p&gt;Note that, much like for Options types we pass to ECharts, we need to type the sort event data we expect to receive from the JavaScript callback, and prepare an action for the enclosing component.&lt;/p&gt; &lt;div class="code code--highlighted"&gt;&lt;div class="sourceCode"&gt;&lt;pre class="sourceCode"&gt;&lt;code class="sourceCode"&gt;&lt;span id="1"&gt;&lt;a href="#1" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt;&lt;span class="kw"&gt;type&lt;/span&gt; &lt;span class="dt"&gt;SimpleExampleEvent&lt;/span&gt; &lt;span class="ot"&gt;=&lt;/span&gt;&lt;/span&gt; &lt;span id="2"&gt;&lt;a href="#2" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; (&lt;span class="ot"&gt; name ::&lt;/span&gt; &lt;span class="dt"&gt;String&lt;/span&gt;&lt;/span&gt; &lt;span id="3"&gt;&lt;a href="#3" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; ,&lt;span class="ot"&gt; seriesIndex ::&lt;/span&gt; &lt;span class="dt"&gt;Int&lt;/span&gt;&lt;/span&gt; &lt;span id="4"&gt;&lt;a href="#4" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; ,&lt;span class="ot"&gt; dataIndex ::&lt;/span&gt; &lt;span class="dt"&gt;Int&lt;/span&gt;&lt;/span&gt; &lt;span id="5"&gt;&lt;a href="#5" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; )&lt;/span&gt; &lt;span id="6"&gt;&lt;a href="#6" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt;&lt;/span&gt; &lt;span id="7"&gt;&lt;a href="#7" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt;&lt;span class="kw"&gt;data&lt;/span&gt; &lt;span class="dt"&gt;DemoAction&lt;/span&gt;&lt;/span&gt; &lt;span id="8"&gt;&lt;a href="#8" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; &lt;span class="ot"&gt;=&lt;/span&gt; &lt;span class="dt"&gt;SetChart2Offset&lt;/span&gt; &lt;span class="dt"&gt;String&lt;/span&gt;&lt;/span&gt; &lt;span id="9"&gt;&lt;a href="#9" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; &lt;span class="op"&gt;|&lt;/span&gt; &lt;span class="dt"&gt;Chart3Event&lt;/span&gt; (&lt;span class="dt"&gt;Record&lt;/span&gt; &lt;span class="dt"&gt;SimpleExampleEvent&lt;/span&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;Now our component rendering and handling actions can be as follows:&lt;/p&gt; &lt;div class="code code--highlighted"&gt;&lt;div class="sourceCode"&gt;&lt;pre class="sourceCode"&gt;&lt;code class="sourceCode"&gt;&lt;span id="1"&gt;&lt;a href="#1" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; render3 item &lt;span class="ot"&gt;=&lt;/span&gt;&lt;/span&gt; &lt;span id="2"&gt;&lt;a href="#2" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; &lt;span class="kw"&gt;let&lt;/span&gt;&lt;/span&gt; &lt;span id="3"&gt;&lt;a href="#3" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt;&lt;span class="ot"&gt; obj ::&lt;/span&gt; &lt;span class="dt"&gt;SimpleExampleOptions&lt;/span&gt;&lt;/span&gt; &lt;span id="4"&gt;&lt;a href="#4" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; obj &lt;span class="ot"&gt;=&lt;/span&gt;&lt;/span&gt; &lt;span id="5"&gt;&lt;a href="#5" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; { xAxis&lt;span class="op"&gt;:&lt;/span&gt; {&lt;span class="kw"&gt;type&lt;/span&gt;&lt;span class="op"&gt;:&lt;/span&gt; &lt;span class="st"&gt;&amp;quot;category&amp;quot;&lt;/span&gt;, &lt;span class="kw"&gt;data&lt;/span&gt;&lt;span class="op"&gt;:&lt;/span&gt; [&lt;span class="st"&gt;&amp;quot;Mon&amp;quot;&lt;/span&gt;, &lt;span class="st"&gt;&amp;quot;Tue&amp;quot;&lt;/span&gt;, &lt;span class="st"&gt;&amp;quot;Wed&amp;quot;&lt;/span&gt;, &lt;span class="st"&gt;&amp;quot;Thu&amp;quot;&lt;/span&gt;, &lt;span class="st"&gt;&amp;quot;Fri&amp;quot;&lt;/span&gt;, &lt;span class="st"&gt;&amp;quot;Sat&amp;quot;&lt;/span&gt;, &lt;span class="st"&gt;&amp;quot;Sun&amp;quot;&lt;/span&gt;]}&lt;/span&gt; &lt;span id="6"&gt;&lt;a href="#6" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; , yAxis&lt;span class="op"&gt;:&lt;/span&gt; {&lt;span class="kw"&gt;type&lt;/span&gt;&lt;span class="op"&gt;:&lt;/span&gt; &lt;span class="st"&gt;&amp;quot;value&amp;quot;&lt;/span&gt;}&lt;/span&gt; &lt;span id="7"&gt;&lt;a href="#7" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; , series&lt;span class="op"&gt;:&lt;/span&gt;&lt;/span&gt; &lt;span id="8"&gt;&lt;a href="#8" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; [{&lt;span class="kw"&gt;type&lt;/span&gt;&lt;span class="op"&gt;:&lt;/span&gt; &lt;span class="st"&gt;&amp;quot;line&amp;quot;&lt;/span&gt;, &lt;span class="kw"&gt;data&lt;/span&gt;&lt;span class="op"&gt;:&lt;/span&gt; [&lt;span class="dv"&gt;150&lt;/span&gt;, &lt;span class="dv"&gt;230&lt;/span&gt;, &lt;span class="dv"&gt;224&lt;/span&gt;, &lt;span class="dv"&gt;218&lt;/span&gt;, &lt;span class="dv"&gt;135&lt;/span&gt;, &lt;span class="dv"&gt;147&lt;/span&gt;, &lt;span class="dv"&gt;260&lt;/span&gt;]}&lt;/span&gt; &lt;span id="9"&gt;&lt;a href="#9" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; ,{&lt;span class="kw"&gt;type&lt;/span&gt;&lt;span class="op"&gt;:&lt;/span&gt; &lt;span class="st"&gt;&amp;quot;line&amp;quot;&lt;/span&gt;, &lt;span class="kw"&gt;data&lt;/span&gt;&lt;span class="op"&gt;:&lt;/span&gt; [&lt;span class="dv"&gt;250&lt;/span&gt;, &lt;span class="dv"&gt;130&lt;/span&gt;, &lt;span class="dv"&gt;254&lt;/span&gt;, &lt;span class="dv"&gt;318&lt;/span&gt;, &lt;span class="dv"&gt;137&lt;/span&gt;, &lt;span class="dv"&gt;247&lt;/span&gt;, &lt;span class="dv"&gt;160&lt;/span&gt;]}&lt;/span&gt; &lt;span id="10"&gt;&lt;a href="#10" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; ]&lt;/span&gt; &lt;span id="11"&gt;&lt;a href="#11" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; }&lt;/span&gt; &lt;span id="12"&gt;&lt;a href="#12" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; renderItem &lt;span class="ot"&gt;=&lt;/span&gt; &lt;span class="kw"&gt;case&lt;/span&gt; item &lt;span class="kw"&gt;of&lt;/span&gt;&lt;/span&gt; &lt;span id="13"&gt;&lt;a href="#13" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; &lt;span class="dt"&gt;Nothing&lt;/span&gt; &lt;span class="ot"&gt;-&amp;gt;&lt;/span&gt; HH.p_ [ HH.text &lt;span class="st"&gt;&amp;quot;nothing clicked&amp;quot;&lt;/span&gt; ]&lt;/span&gt; &lt;span id="14"&gt;&lt;a href="#14" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; &lt;span class="dt"&gt;Just&lt;/span&gt; r &lt;span class="ot"&gt;-&amp;gt;&lt;/span&gt; HH.div_&lt;/span&gt; &lt;span id="15"&gt;&lt;a href="#15" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; [ HH.h6_ [ HH.text &lt;span class="st"&gt;&amp;quot;some click!&amp;quot;&lt;/span&gt; ]&lt;/span&gt; &lt;span id="16"&gt;&lt;a href="#16" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; , HH.p_ [ HH.text r&lt;span class="op"&gt;.&lt;/span&gt;name ]&lt;/span&gt; &lt;span id="17"&gt;&lt;a href="#17" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; , HH.p_ &lt;/span&gt; &lt;span id="18"&gt;&lt;a href="#18" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; [ HH.text &lt;/span&gt; &lt;span id="19"&gt;&lt;a href="#19" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; &lt;span class="op"&gt;$&lt;/span&gt; fold&lt;/span&gt; &lt;span id="20"&gt;&lt;a href="#20" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; [ &lt;span class="st"&gt;&amp;quot;seriesIndex/dataIndex: &amp;quot;&lt;/span&gt;&lt;/span&gt; &lt;span id="21"&gt;&lt;a href="#21" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; , &lt;span class="fu"&gt;show&lt;/span&gt; r&lt;span class="op"&gt;.&lt;/span&gt;seriesIndex&lt;/span&gt; &lt;span id="22"&gt;&lt;a href="#22" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; , &lt;span class="st"&gt;&amp;quot; / &amp;quot;&lt;/span&gt;&lt;/span&gt; &lt;span id="23"&gt;&lt;a href="#23" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; , &lt;span class="fu"&gt;show&lt;/span&gt; r&lt;span class="op"&gt;.&lt;/span&gt;dataIndex&lt;/span&gt; &lt;span id="24"&gt;&lt;a href="#24" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; ]&lt;/span&gt; &lt;span id="25"&gt;&lt;a href="#25" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; ]&lt;/span&gt; &lt;span id="26"&gt;&lt;a href="#26" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; ]&lt;/span&gt; &lt;span id="27"&gt;&lt;a href="#27" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; &lt;span class="kw"&gt;in&lt;/span&gt;&lt;/span&gt; &lt;span id="28"&gt;&lt;a href="#28" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; HH.div_&lt;/span&gt; &lt;span id="29"&gt;&lt;a href="#29" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; [ HH.p_ [ HH.text &lt;span class="st"&gt;&amp;quot;echarts simple-line example with clickable callback&amp;quot;&lt;/span&gt; ]&lt;/span&gt; &lt;span id="30"&gt;&lt;a href="#30" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; , renderItem&lt;/span&gt; &lt;span id="31"&gt;&lt;a href="#31" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; , HH.slot _echarts unit ECharts.component {options&lt;span class="op"&gt;:&lt;/span&gt; obj, modified&lt;span class="op"&gt;:&lt;/span&gt;false} &lt;span class="dt"&gt;Chart3Event&lt;/span&gt;&lt;/span&gt; &lt;span id="32"&gt;&lt;a href="#32" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; ]&lt;/span&gt; &lt;span id="33"&gt;&lt;a href="#33" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt;&lt;/span&gt; &lt;span id="34"&gt;&lt;a href="#34" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; handleAction &lt;span class="ot"&gt;=&lt;/span&gt; &lt;span class="kw"&gt;case&lt;/span&gt; _ &lt;span class="kw"&gt;of&lt;/span&gt;&lt;/span&gt; &lt;span id="35"&gt;&lt;a href="#35" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; &lt;span class="dt"&gt;Chart3Event&lt;/span&gt; ev &lt;span class="ot"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="kw"&gt;do&lt;/span&gt;&lt;/span&gt; &lt;span id="36"&gt;&lt;a href="#36" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt; H.modify_ _ { chart3ClickEvent &lt;span class="ot"&gt;=&lt;/span&gt; &lt;span class="dt"&gt;Just&lt;/span&gt; ev }&lt;/span&gt; &lt;span id="37"&gt;&lt;a href="#37" aria-hidden="true" tabindex="-1"&gt;&lt;/a&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div id="example-3"&gt; &lt;/div&gt; &lt;script src="/js/halogen-echarts-example.js" data-humdrum-arg="3"&gt;&lt;/script&gt; &lt;h2 id="the-modified--bool-input-parameter"&gt;the &lt;code&gt;modified :: Bool&lt;/code&gt; Input parameter&lt;/h2&gt; &lt;p&gt;From the above example you may have noticed that the Input object requires extra information. In particular, the &lt;code&gt;modified&lt;/code&gt; boolean allows you to tune whether you want to re-render the graph each time the component is re-rendered or only using the explicit Query-ing mechanism that Halogen offers. Typically you will hardcode the &lt;code&gt;modified&lt;/code&gt; value depending on how often component re-renders are in your application.&lt;/p&gt; &lt;h2 id="full-source-code"&gt;full source-code&lt;/h2&gt; &lt;p&gt;You’ll find the full source-code of the generated JavaScript in a &lt;a href="/gen/out/halogen-echarts-example.cmark__Main.purs"&gt;separate file&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;The source-code uses &lt;a href="https://github.com/lucasdicioccio/purescript-humdrum"&gt;HumDrum&lt;/a&gt; to be able to insert a same JS file one time per different example.&lt;/p&gt; &lt;p&gt;&lt;strong&gt;want more examples? contact me&lt;/strong&gt;&lt;/p&gt; &lt;/section&gt;&lt;/div&gt;
        </content>
        <link href="https://dicioccio.fr/halogen-echarts-example.html" rel="alternate"/>
        <summary type="text">
            A demo of a [ECharts-for-Halogen](https://github.com/lucasdicioccio/purescript-halogen-echarts-simple) library.
        </summary>
    </entry>
</feed>
